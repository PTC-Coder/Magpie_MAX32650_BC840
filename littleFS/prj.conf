# Enable SPI
CONFIG_SPI=y

# Enable I2C for DS3231 RTC
CONFIG_I2C=y

# Basic SPI configuration
CONFIG_SPI_ASYNC=y

# Enable GPIO
CONFIG_GPIO=y
CONFIG_GPIO_AS_PINRESET=n

# Clock configuration - external 32kHz crystal from DS3231
CONFIG_CLOCK_CONTROL_NRF_K32SRC_EXT_FULL_SWING=y
CONFIG_CLOCK_CONTROL_NRF_K32SRC_20PPM=y

# Make sure printk is printing to the UART console
CONFIG_CONSOLE=y

# Disable Zephyr's built-in LittleFS since we're using local LittleFS
CONFIG_FILE_SYSTEM=n
CONFIG_FILE_SYSTEM_MKFS=n
CONFIG_FILE_SYSTEM_LITTLEFS=n

# Enable Zephyr flash subsystem for QSPI flash (Flash2)
CONFIG_FLASH=y
CONFIG_FLASH_MAP=n
CONFIG_FLASH_PAGE_LAYOUT=y

# Enable Nordic QSPI NOR driver
CONFIG_NORDIC_QSPI_NOR=y

CONFIG_FPU=y
CONFIG_CBPRINTF_FP_SUPPORT=y

# Enable RTT
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_UART_CONSOLE=n

# Enable logging with immediate processing
CONFIG_LOG=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_PRINTK=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_MODE_IMMEDIATE=y

# Reduce debug noise
CONFIG_SPI_LOG_LEVEL_WRN=y

# Small RTT Buffer - minimal but functional
CONFIG_SEGGER_RTT_BUFFER_SIZE_UP=2048

# Memory configuration
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_HEAP_MEM_POOL_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1024

# Enable time functions for struct tm
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y

# Allow SPIM driver (nRF52840 doesn't have PAN-58, but keep for compatibility)
# CONFIG_SOC_NRF52832_ALLOW_SPIM_DESPITE_PAN_58=y
